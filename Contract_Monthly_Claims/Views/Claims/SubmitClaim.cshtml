@model Contract_Monthly_Claims.Models.Claim
@{
    ViewData["Title"] = "Submit Claim";

    // Example modules with fixed hourly rates
    var modules = new List<(string Name, decimal HourlyRate)>
    {
        ("Mathematics 101", 150),
        ("Physics 201", 180),
        ("Computer Science 301", 200),
        ("Chemistry 101", 160)
    };
}

<style>
    body {
        background: #f4f7fa;
    }

    /* Banner */
    .claim-banner {
        background: linear-gradient(135deg, #007bff, #00b4d8);
        color: white;
        text-align: center;
        padding: 60px 20px;
        border-bottom: 4px solid #0056b3;
        border-radius: 0 0 25px 25px;
        box-shadow: 0 3px 15px rgba(0,0,0,0.1);
    }

        .claim-banner h2 {
            font-size: 2.5rem;
            font-weight: bold;
        }

    /* Card/Form */
    .card {
        border: none;
        border-radius: 15px;
        background-color: #ffffff;
        box-shadow: 0 5px 25px rgba(0,0,0,0.1);
    }

    .form-label {
        font-weight: 600;
        color: #333;
    }

    input, textarea, select {
        border-radius: 10px !important;
        border: 1px solid #ccc !important;
    }

        input:focus, textarea:focus, select:focus {
            border-color: #007bff !important;
            box-shadow: 0 0 6px rgba(0,123,255,0.3);
        }

    .btn-success {
        background: linear-gradient(135deg, #00b050, #009645);
        border: none;
        border-radius: 10px;
        font-size: 1.1rem;
        font-weight: bold;
        transition: all 0.3s ease;
    }

        .btn-success:hover {
            background: linear-gradient(135deg, #009645, #007bff);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,123,255,0.2);
        }

    .container {
        max-width: 700px;
    }

    .note-box {
        background-color: #f8f9fa;
        border-left: 4px solid #007bff;
        padding: 10px 15px;
        border-radius: 8px;
        font-size: 0.95rem;
        color: #555;
    }
</style>

<!-- Banner -->
<div class="claim-banner">
    <h2>Submit Your Monthly Claim</h2>
    <p>Complete the form below to record your teaching hours and upload supporting documents.</p>
</div>

<!-- Form Container -->
<div class="container mt-5 mb-5">
    <div class="card p-5 shadow">
        <form asp-action="SubmitClaim" method="post" enctype="multipart/form-data">

            <!-- Lecturer ID -->
            <div class="mb-3">
                <label asp-for="LecturerId" class="form-label">Lecturer ID</label>
                <input asp-for="LecturerId" type="number" class="form-control" placeholder="Enter your Lecturer ID" required />
                <span asp-validation-for="LecturerId" class="text-danger"></span>
            </div>

            <!-- Module Selection -->
            <div class="mb-3">
                <label asp-for="ModuleName" class="form-label">Module</label>
                <select asp-for="ModuleName" class="form-select" id="moduleSelect" required>
                    <option value="">-- Select Module --</option>
                    @foreach (var module in modules)
                    {
                        <option value="@module.Name" data-rate="@module.HourlyRate">@module.Name</option>
                    }
                </select>
                <span asp-validation-for="ModuleName" class="text-danger"></span>
            </div>

            <!-- Hours Worked & Hourly Rate -->
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label asp-for="HoursWorked" class="form-label">Hours Worked</label>
                    <input asp-for="HoursWorked" class="form-control" type="number" min="1" required />
                    <span asp-validation-for="HoursWorked" class="text-danger"></span>
                </div>
                <div class="col-md-6 mb-3">
                    <label asp-for="HourlyRate" class="form-label">Hourly Rate (R)</label>
                    <input asp-for="HourlyRate" id="HourlyRate" class="form-control" type="number" readonly />
                    <span asp-validation-for="HourlyRate" class="text-danger"></span>
                </div>
            </div>

            <!-- Notes -->
            <div class="mb-3">
                <label asp-for="Notes" class="form-label">Additional Notes</label>
                <textarea asp-for="Notes" class="form-control" rows="3" placeholder="Any extra details (optional)"></textarea>
            </div>

            <!-- File Upload -->
            <div class="mb-3">
                <label class="form-label">Upload Supporting Document (.pdf, .docx, .xlsx)</label>
                <input type="file" name="document" class="form-control" accept=".pdf,.docx,.xlsx" />
            </div>

            <!-- Note -->
            <div class="note-box mb-4">
                <strong>Note:</strong> Ensure your claim is accurate and includes all required documentation. Claims without supporting documents may be delayed.
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-success w-100 py-2">Submit Claim</button>
        </form>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script>
        const moduleSelect = document.getElementById('moduleSelect');
        const hourlyRateInput = document.getElementById('HourlyRate');

        moduleSelect.addEventListener('change', function () {
            const selectedOption = moduleSelect.selectedOptions[0];
            const rate = selectedOption.getAttribute('data-rate');
            hourlyRateInput.value = rate || '';
        });
    </script>
}
